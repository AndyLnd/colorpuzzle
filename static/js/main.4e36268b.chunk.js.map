{"version":3,"sources":["position.ts","util.ts","tileRenderer.ts","Tile.tsx","Board.tsx","map.ts","GameProvider.tsx","LevelSelect.tsx","transitionStyles.ts","SolveBackground.tsx","FullScreenCenter.tsx","Finish.tsx","Game.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["Direction","rndInt","max","Math","floor","random","rndArrayElement","array","length","wrap","number","getPosition","index","width","x","y","isSame","posA","posB","addPositionsWrap","height","addPositions","getExits","point","prev","next","map","pos","subPositions","West","East","North","South","toDirection","rotateExits","exits","rota","exit","dirVectors","roundC","corners","cx","cy","colors","exitsToPath","c1","c2","strokePathString","color","tileStyle","backgroundSize","strokeWidth","transition","tile","strokes","rotation","onClick","onRightClick","css","onContextMenu","pointerEvents","transform","stroke","d","fill","boardStyle","tileSize","isSolved","display","gridTemplateColumns","gridTemplateRows","background","padding","borderRadius","opacity","rotateTile","viewBox","Tile","e","preventDefault","mapPosToPosStroke","posMap","makePath","isDone","steps","minLength","min","isPossible","currentStep","candidates","filter","every","step","push","makeMap","randomRotate","paths","Array","from","_","path","makeDemoMap","defaultState","introMap","isStarted","showBackground","defaultContext","start","reset","GameContext","React","createContext","gameReducer","state","action","type","payload","totalSize","document","body","offsetHeight","offsetWidth","turns","neighbor","find","other","some","nbStroke","includes","checkSolved","randomTile","t","children","useReducer","dispatch","useEffect","id","window","setTimeout","clearTimeout","loop","Provider","value","containerStyle","backgroundColor","maxWidth","flexDirection","flexWrap","justifyContent","alignItems","buttonStyle","border","fontWeight","fontSize","margin","boxShadow","cursor","sizes","props","useContext","Fragment","key","scaleInTransition","moveXAni","size","keyframes","backgroundPositionX","moveYAni","backgroundPositionY","rendered","curves","svgStrokes","join","svgMap","bg","replace","position","top","left","backgroundPosition","clipPath","animation","style","backgroundImage","glow","textShadow","animals","boardSize","animal","useRef","marginTop","current","CSSTransition","in","timeout","enter","unmountOnExit","classNames","SolveBackground","mountOnEnter","FullScreenCenter","Board","Finish","LevelSelect","globalStyle","minHeight","overflow","styles","GameProvider","Game","Boolean","location","hostname","match","ReactDOM","render","App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4e36268b.chunk.js","sourcesContent":["import {wrap} from './util';\n\nexport enum Direction {\n  North,\n  East,\n  South,\n  West,\n}\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport type Exits = Direction[];\n\nexport interface Stroke {\n  color: number;\n  exits: Exits;\n}\n\nexport interface PosStroke extends Position {\n  stroke: Stroke;\n}\n\nexport interface TileContent {\n  rotation: number;\n  strokes: Stroke[];\n}\n\nexport type Tile = Position & TileContent;\n\nexport type Map = Tile[];\n\nexport const getPosition = (index: number, width: number): Position => ({\n  x: index % width,\n  y: Math.floor(index / width),\n});\n\nexport const isSame = (posA: Position, posB: Position) => posA.x === posB.x && posA.y === posB.y;\n\nexport const addPositions = (posA: Position, posB: Position): Position => ({x: posA.x + posB.x, y: posA.y + posB.y});\n\nexport const addPositionsWrap = (posA: Position, posB: Position, width: number, height: number): Position => {\n  const {x, y} = addPositions(posA, posB);\n  return {x: wrap(x, width), y: wrap(y, height)};\n};\n\nexport const subPositions = (posA: Position, posB: Position): Position => ({x: posA.x - posB.x, y: posA.y - posB.y});\n\nexport const isInBounds = ({x, y}: Position, width: number, height: number) =>\n  x < width && x >= 0 && y < height && y >= 0;\n\nexport const toDirection = (posA: Position, posB: Position): Direction => {\n  const {x, y} = subPositions(posA, posB);\n  if (x === -1 || x > 1) {\n    return Direction.West;\n  }\n  if (x === 1 || x < -1) {\n    return Direction.East;\n  }\n  if (y === -1 || y > 1) {\n    return Direction.North;\n  }\n  return Direction.South;\n};\n\nexport const getExits = (point: Position, prev: Position, next: Position): Exits =>\n  [prev, next].map((pos) => toDirection(pos, point)) as Exits;\n\nexport const hasNorth = (exits: Exits) => exits.includes(Direction.North);\nexport const hasEast = (exits: Exits) => exits.includes(Direction.East);\nexport const hasSouth = (exits: Exits) => exits.includes(Direction.South);\nexport const hasWest = (exits: Exits) => exits.includes(Direction.West);\nexport const hasNorthSouth = (exits: Exits) => hasNorth(exits) && hasSouth(exits);\nexport const hasEastWest = (exits: Exits) => hasEast(exits) && hasWest(exits);\n\nexport const rotateExits = (exits: Exits, rota: number) => exits.map((exit) => (((exit + rota) % 4) + 4) % 4) as Exits;\n\nexport const dirVectors: Record<Direction, Position> = {\n  [Direction.North]: {x: 0, y: -1},\n  [Direction.East]: {x: 1, y: 0},\n  [Direction.South]: {x: 0, y: 1},\n  [Direction.West]: {x: -1, y: 0},\n};\n","export const rndInt = (max: number): number => Math.floor(Math.random() * max);\n\nexport const rndArrayElement = <T>(array: T[]): T => array[rndInt(array.length)];\n\nexport const wrap = (number: number, max: number): number => (max === 0 ? number : ((number % max) + max) % max);\n","import {Direction, rotateExits, Map, Exits} from './position';\n\nconst roundC = 0.2761;\nconst corners = {\n  [Direction.North]: {x: 0.5, y: 0, cx: 0.5, cy: roundC},\n  [Direction.East]: {x: 1, y: 0.5, cx: 1 - roundC, cy: 0.5},\n  [Direction.South]: {x: 0.5, y: 1, cx: 0.5, cy: 1 - roundC},\n  [Direction.West]: {x: 0, y: 0.5, cx: roundC, cy: 0.5},\n};\n\nexport const colors = ['#d10', '#12e', '#080', '#eb0'];\n\nexport const exitsToPath = (exits: Exits): string => {\n  const c1 = corners[exits[0]];\n  const c2 = corners[exits[1]];\n  return `M ${c1.x} ${c1.y} C ${c1.cx} ${c1.cy}, ${c2.cx} ${c2.cy}, ${c2.x} ${c2.y}`;\n};\n\n\nconst strokePathString = (color: number, exits: Exits) => `<path stroke=\"${colors[color]}\" d=\"${exitsToPath(exits)}\"/>`;\n\nexport const svgMap = (map: Map, width: number, height: number, size = 64) => {\n  const curves = map.map(({strokes, rotation, x, y}) => {\n    const svgStrokes = strokes.map(({color, exits}) => strokePathString(color, rotateExits(exits, rotation)));\n    return `<g transform=\"translate(${x} ${y})\">${svgStrokes.join('')}</g>`;\n  });\n  return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size * width}\" height=\"${size *\n    height}\" viewBox=\"0 0 ${width} ${height}\" stroke-width=\".5\"><style>path { mix-blend-mode: screen;}</style>${curves.join(\n    ''\n  )}</svg>`;\n};\n","/** @jsxImportSource @emotion/react */\n\nimport {Tile} from './position';\nimport {MouseEvent} from 'react';\nimport {colors, exitsToPath} from './tileRenderer';\n\ninterface TileProps {\n  onClick: (event: MouseEvent<HTMLOrSVGElement>) => void;\n  onRightClick: (event: MouseEvent<HTMLOrSVGElement>) => void;\n  tile: Tile;\n}\n\nconst tileStyle = {\n  backgroundSize: 'cover',\n  strokeWidth: 0.5,\n  '& path': {\n    'mix-blend-mode': 'screen',\n  },\n  '& g': {\n    transition: 'all .2s ease-in-out',\n  },\n};\n\nexport default ({tile: {x, y, strokes, rotation}, onClick, onRightClick}: TileProps) => {\n  return (\n    <svg x={x} y={y} css={tileStyle} onClick={onClick} onContextMenu={onRightClick} pointerEvents=\"all\">\n      <g transform={`rotate(${rotation * 90} .5 .5)`}>\n        {strokes.map(({color, exits}) => (\n          <path stroke={colors[color]} d={exitsToPath(exits)} />\n        ))}\n        <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"none\" />\n      </g>\n    </svg>\n  );\n};\n","/** @jsxImportSource @emotion/react */\n\nimport Tile from './Tile';\nimport {Map, Tile as TileType} from './position';\n\ninterface BoardProps {\n  map: Map;\n  width: number;\n  height: number;\n  rotateTile: (tile: TileType, turns: number) => void;\n  tileSize: number;\n  isSolved?: boolean;\n}\n\nconst boardStyle = (width: number, height: number, tileSize: number, isSolved: boolean) => ({\n  display: 'block',\n  gridTemplateColumns: `repeat(${width}, 1fr)`,\n  gridTemplateRows: `repeat(${height}, 1fr)`,\n  width: tileSize * width,\n  height: tileSize * height,\n  background: isSolved ? 'rgba(0,0,0,.8)' : 'rgba(0,0,0,0)',\n  padding: isSolved ? 32 : 0,\n  transform: isSolved ? 'scale(.75)' : 'scale(1)',\n  borderRadius: isSolved ? 64 : 0,\n  opacity: isSolved ? 1 : 0.8,\n  transition: 'all 1s ease-in-out',\n});\n\nexport default ({map, width, height, rotateTile, tileSize, isSolved = false}: BoardProps) => {\n  return (\n    <svg viewBox={`0 0 ${width} ${height}`} css={boardStyle(width, height, tileSize, isSolved)}>\n      {map.map((tile) => (\n        <Tile\n          tile={tile}\n          onRightClick={e => {\n            e.preventDefault();\n            !isSolved && rotateTile(tile, -1);\n          }}\n          onClick={() => {\n            !isSolved && rotateTile(tile, 1);\n          }}\n          key={`${tile.x},${tile.y}`}\n        />\n      ))}\n    </svg>\n  );\n};\n","import {\n  Position,\n  addPositionsWrap,\n  isSame,\n  getPosition,\n  getExits,\n  dirVectors,\n  rotateExits,\n  PosStroke,\n  Map,\n} from './position';\nimport {rndInt, rndArrayElement} from './util';\n\nconst mapPosToPosStroke = (posMap: Position[], color: number) =>\n  posMap.map(\n    (point, index): PosStroke => {\n      const prev = index === 0 ? posMap[posMap.length - 1] : posMap[index - 1];\n      const next = index === posMap.length - 1 ? posMap[0] : posMap[index + 1];\n      const exits = getExits(point, prev, next);\n      return {x: point.x, y: point.y, stroke: {exits, color}};\n    }\n  );\n\nconst makePath = (width: number, height: number, color: number): PosStroke[] => {\n  let isDone = false;\n  let steps: Position[] = [];\n  const minLength = Math.min(width + height, width * height - 1);\n\n  while (!isDone) {\n    let isPossible = true;\n    let currentStep = {x: rndInt(width), y: rndInt(height)};\n    steps = [currentStep];\n\n    while (!isDone && isPossible) {\n      const candidates = [[-1, 0], [1, 0], [0, -1], [0, 1]]\n        .map(([x, y]) => addPositionsWrap(currentStep, {x, y}, width, height))\n        .filter(pos => steps.every((step, index) => (index === 0 && steps.length > minLength) || !isSame(step, pos)));\n      if (candidates.length > 0) {\n        currentStep = rndArrayElement(candidates);\n        if (isSame(steps[0], currentStep)) {\n          isDone = true;\n        } else {\n          steps.push(currentStep);\n        }\n      } else {\n        isPossible = false;\n      }\n    }\n  }\n  return mapPosToPosStroke(steps, color);\n};\n\nexport const makeMap = (width: number, height: number, randomRotate = false): Map => {\n  const paths = [\n    ...makePath(width, height, 0),\n    ...makePath(width, height, 1),\n    ...makePath(width, height, 2),\n    ...makePath(width, height, 3),\n  ];\n  return Array.from({length: width * height}, (_, index) => {\n    const pos = getPosition(index, width);\n    const strokes = paths.filter(path => isSame(path, pos)).map(({stroke}) => stroke);\n    return {...pos, strokes, rotation: randomRotate ? Math.floor(Math.random() * 16) : 0};\n  });\n};\n\nexport const makeDemoMap = (): Map => {\n  const pathPosA = [\n    {x: 0, y: 0},\n    {x: 1, y: 0},\n    {x: 2, y: 0},\n    {x: 3, y: 0},\n    {x: 3, y: 1},\n    {x: 2, y: 1},\n    {x: 1, y: 1},\n    {x: 0, y: 1},\n  ];\n  const pathPosB = [\n    {x: 1, y: 0},\n    {x: 2, y: 0},\n    {x: 2, y: 1},\n    {x: 2, y: 2},\n    {x: 2, y: 3},\n    {x: 1, y: 3},\n    {x: 1, y: 2},\n    {x: 1, y: 1},\n  ];\n  const paths = [...mapPosToPosStroke(pathPosA, rndInt(4)), ...mapPosToPosStroke(pathPosB, rndInt(4))];\n  return Array.from({length: 16}, (_, index) => {\n    const pos = getPosition(index, 4);\n    const strokes = paths.filter(path => isSame(path, pos)).map(({stroke}) => stroke);\n    return {...pos, strokes, rotation: 0};\n  });\n};\n\nexport const checkSolved = (map: Map, width: number, height: number) => {\n  return map.every(({x, y, rotation, strokes}) =>\n    strokes.every(({color, exits}) => {\n      const rotExits = rotateExits(exits, rotation);\n      return rotExits.every(exit => {\n        const pos = addPositionsWrap({x, y}, dirVectors[exit], width, height);\n        const neighbor = map.find(other => isSame(pos, other))!;\n        return neighbor.strokes.some(nbStroke => {\n          if (nbStroke.color === color) {\n            const nbExitOpposites = rotateExits(nbStroke.exits, neighbor.rotation + 2);\n            return nbExitOpposites.includes(exit);\n          }\n          return false;\n        });\n      });\n    })\n  );\n};\n","import React, {useReducer, useEffect} from 'react';\nimport {makeMap, checkSolved, makeDemoMap} from './map';\nimport {Map, Tile} from './position';\nimport {rndArrayElement, rndInt} from './util';\n\ninterface State {\n  width: number;\n  height: number;\n  introMap: Map;\n  map: Map;\n  isSolved: boolean;\n  isStarted: boolean;\n  tileSize: number;\n  showBackground: boolean;\n}\n\ninterface Context extends State {\n  start: (width: number, height: number) => void;\n  rotateTile: (tile: Tile, turns: number) => void;\n  reset: () => void;\n}\n\ntype Action =\n  | {type: 'start'; payload: {width: number; height: number}}\n  | {type: 'rotate'; payload: {tile: Tile; turns: number}}\n  | {type: 'reset'}\n  | {type: 'showBackground'}\n  | {type: 'rotateDemo'};\n\nconst defaultState: State = {\n  width: 4,\n  height: 4,\n  introMap: makeDemoMap(),\n  map: makeMap(4, 4, true),\n  isSolved: false,\n  isStarted: false,\n  tileSize: 50,\n  showBackground: false,\n};\n\nconst defaultContext = {\n  ...defaultState,\n  start: () => {},\n  rotateTile: () => {},\n  reset: () => {},\n};\n\nexport const GameContext = React.createContext<Context>(defaultContext);\n\nconst gameReducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'start': {\n      const {width, height} = action.payload;\n      const totalSize = Math.min(document.body.offsetHeight, document.body.offsetWidth, 532) - 32;\n      const tileSize = Math.floor(totalSize / (Math.max(width, height) * 4)) * 4;\n      return {\n        ...state,\n        isSolved: false,\n        width,\n        height,\n        map: makeMap(width, height, true),\n        isStarted: true,\n        tileSize,\n      };\n    }\n    case 'rotate': {\n      const map = state.map.map((tile) =>\n        tile === action.payload.tile ? {...tile, rotation: tile.rotation + action.payload.turns} : tile\n      );\n      const isSolved = state.isStarted && checkSolved(map, state.width, state.width);\n      return {...state, map, isSolved};\n    }\n    case 'reset': {\n      return {\n        ...state,\n        introMap: makeDemoMap(),\n        isStarted: false,\n        showBackground: false,\n      };\n    }\n    case 'showBackground': {\n      return {\n        ...state,\n        showBackground: true,\n      };\n    }\n    case 'rotateDemo': {\n      const randomTile = rndArrayElement(state.introMap.filter((t) => t.strokes.length > 0));\n      const introMap = state.introMap.map((tile) =>\n        tile === randomTile ? {...tile, rotation: tile.rotation + (rndInt(2) > 0 ? 1 : -1)} : tile\n      );\n      return {...state, introMap};\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default ({children}: {children: React.ReactNode}) => {\n  const [state, dispatch] = useReducer(gameReducer, defaultState);\n  const start = (width: number, height: number) => dispatch({type: 'start', payload: {width, height}});\n  const rotateTile = (tile: Tile, turns: number) => dispatch({type: 'rotate', payload: {tile, turns}});\n  const reset = () => dispatch({type: 'reset'});\n  const {width, height, introMap, map, isSolved, isStarted, tileSize, showBackground} = state;\n  useEffect(() => {\n    let id: number;\n    if (isSolved) {\n      id = window.setTimeout(() => {\n        dispatch({type: 'showBackground'});\n      }, 1000);\n    }\n    return () => {\n      clearTimeout(id);\n    };\n  }, [isSolved]);\n  useEffect(() => {\n    const loop = () => {\n      id = window.setTimeout(() => {\n        dispatch({type: 'rotateDemo'});\n        loop();\n      }, rndInt(600) + 200);\n    };\n    let id: number;\n    if (!isStarted) {\n      loop();\n    }\n    return () => {\n      clearTimeout(id);\n    };\n  }, [isStarted]);\n\n  return (\n    <GameContext.Provider\n      value={{\n        width,\n        height,\n        isSolved,\n        introMap,\n        map,\n        start,\n        rotateTile,\n        reset,\n        isStarted,\n        tileSize,\n        showBackground,\n      }}\n    >\n      {children}\n    </GameContext.Provider>\n  );\n};\n","/** @jsxImportSource @emotion/react */\n\nimport {css} from '@emotion/react';\nimport React from 'react';\nimport {useContext} from 'react';\nimport {GameContext} from './GameProvider';\n\nconst containerStyle = css({\n  backgroundColor: 'rgba(255,255,255,.5)',\n  maxWidth: 160,\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap',\n  justifyContent: 'center',\n  alignItems: 'center',\n  padding: '8px 0',\n  borderRadius: 4,\n});\n\nconst buttonStyle = css({\n  // border: '1px solid #dde',\n  border: 'none',\n  padding: '8px',\n  fontWeight: 500,\n  fontSize: '14px',\n  backgroundColor: '#dde',\n  margin: '4px',\n  color: '#667',\n  borderRadius: 4,\n  boxShadow: '1px 1px 0 #eef inset, -1px -1px 0 #ccd inset',\n  cursor: 'pointer',\n  width: 64,\n  '&:hover': {\n    backgroundColor: '#eef',\n  },\n});\n\nconst sizes = Array.from({length: 8}, (_, index) => ({width: index + 3, height: index + 3}));\n\nexport default (props: React.Props<HTMLDivElement>) => {\n  const {start} = useContext(GameContext);\n  return (\n    <React.Fragment>\n      <div css={containerStyle}>\n        {sizes.map(({width, height}) => {\n          const key = `${width}×${height}`;\n          return (\n            <button key={key} css={buttonStyle} onClick={() => start(width, height)}>\n              {key}\n            </button>\n          );\n        })}\n      </div>\n    </React.Fragment>\n  );\n};\n","import {css} from '@emotion/react';\n\nexport const scaleInTransition = css`\n  &.scaleIn-enter {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  &.scaleIn-enter-active {\n    opacity: 1;\n    transform: scale(1);\n    transition: all 300ms;\n  }\n  &.scaleIn-exit {\n    opacity: 1;\n    transform: scale(1);\n  }\n  &.scaleIn-exit-active {\n    opacity: 0;\n    transform: scale(1.2);\n    transition: all 300ms;\n  }\n`;\n\n\n","/** @jsxImportSource @emotion/react */\n\nimport {keyframes, Interpolation, Theme} from '@emotion/react';\nimport {useContext} from 'react';\nimport {GameContext} from './GameProvider';\nimport {svgMap} from './tileRenderer';\n\nexport const fadeInTransition = {};\n\nconst moveXAni = (size: number) =>\n  keyframes({\n    '0%': {\n      backgroundPositionX: '50%',\n    },\n    '50%': {\n      backgroundPositionX: `calc(50% - ${size / 2}px)`,\n    },\n    '100%': {\n      backgroundPositionX: '50%',\n    },\n  });\n\nconst moveYAni = (size: number) =>\n  keyframes({\n    '0%': {\n      backgroundPositionY: '50%',\n    },\n    '100%': {\n      backgroundPositionY: `calc(50% - ${size}px)`,\n    },\n  });\n\nconst solvedStyle = (size: number): Interpolation<Theme> => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100vw',\n  height: '100vh',\n  backgroundPosition: 'center',\n  clipPath: 'circle(100%)',\n  opacity: 0.3,\n  animation: `${moveXAni(size)} 5s ease-in-out infinite, \n                ${moveYAni(size)} 5s linear infinite`,\n  '&.fadeIn-enter': {\n    opacity: 0,\n  },\n  '&.fadeIn-enter-active': {\n    opacity: 0.3,\n    transition: 'opacity 1.5s .5s',\n  },\n  '&.fadeIn-exit': {\n    opacity: 0.3,\n  },\n  '&.fadeIn-exit-active': {\n    opacity: 0,\n    transition: 'opacity .3s',\n  },\n});\n\nconst size = 64;\n\nexport default (props: React.ClassAttributes<HTMLDivElement>) => {\n  const {width, height, map} = useContext(GameContext);\n  const rendered = svgMap(map, width, height, size * 2);\n  const bg = `data:image/svg+xml;utf8,${rendered.replace(/#/g, '%23')}`;\n  return (\n    <div\n      css={solvedStyle(size * width)}\n      style={{backgroundSize: `${size * width}px`, backgroundImage: `url('${bg}')`}}\n      {...props}\n    />\n  );\n};\n","/** @jsxImportSource @emotion/react */\n\nimport {css} from '@emotion/react';\nimport React from 'react';\n\nconst style = css({\n  position: 'absolute',\n  width: '100vw',\n  height: '100vh',\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'center',\n});\nexport default (props: React.Props<HTMLDivElement>) => <div css={style} {...props} />;\n","/** @jsxImportSource @emotion/react */\n\nimport {css, keyframes} from '@emotion/react';\nimport React, {useRef, useContext} from 'react';\nimport {rndArrayElement} from './util';\nimport {GameContext} from './GameProvider';\n\nconst style = (boardSize: number) =>\n  css({\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 100,\n    cursor: 'pointer',\n    marginTop: boardSize / -8,\n    animation: `${glow} 1s ease-in-out alternate infinite`,\n    '&.growIn-enter': {\n      fontSize: 0,\n      marginTop: 0,\n    },\n    '&.growIn-enter-active': {\n      fontSize: 100,\n      marginTop: boardSize / -8,\n      transition: 'font-size .5s ease-in-out, margin-top .5s ease-in-out',\n    },\n  });\n\nconst glow = keyframes({\n  '0%': {\n    textShadow: '0 0 0px rgba(255,255,255,.6)',\n  },\n  '100%': {\n    textShadow: '0 0 9px rgba(255,255,255,.6)',\n  },\n});\nconst animals = Array.from('🐶🐱🐭🐹🐰🦊🐻🐼🐨🐯🦁🐮🐷🐸🐵');\nexport default (props: React.HTMLAttributes<HTMLDivElement>) => {\n  const animal = useRef(rndArrayElement(animals));\n  const {height, tileSize} = useContext(GameContext);\n  return (\n    <div css={style(height * tileSize)} {...props}>\n      {animal.current}\n    </div>\n  );\n};\n","/** @jsxImportSource @emotion/react */\n\nimport React, {useContext} from 'react';\nimport {CSSTransition} from 'react-transition-group';\nimport Board from './Board';\nimport LevelSelect from './LevelSelect';\nimport {scaleInTransition} from './transitionStyles';\nimport {GameContext} from './GameProvider';\nimport SolveBackground from './SolveBackground';\nimport FullScreenCenter from './FullScreenCenter';\nimport Finish from './Finish';\n\nexport default () => {\n  const {isSolved, isStarted, introMap, map, rotateTile, width, height, reset, tileSize, showBackground} = useContext(\n    GameContext\n  );\n  return (\n    <React.Fragment>\n      <CSSTransition in={showBackground} timeout={{enter: 2000, exit: 300}} unmountOnExit classNames=\"fadeIn\">\n        <SolveBackground />\n      </CSSTransition>\n      <CSSTransition in={isStarted} timeout={300} unmountOnExit mountOnEnter classNames=\"scaleIn\">\n        <FullScreenCenter css={scaleInTransition}>\n          <Board\n            map={map}\n            rotateTile={rotateTile}\n            width={width}\n            height={height}\n            tileSize={tileSize}\n            isSolved={isSolved}\n          />\n          <CSSTransition in={isSolved} timeout={500} unmountOnExit classNames=\"growIn\">\n            <Finish onClick={reset}>reset</Finish>\n          </CSSTransition>\n        </FullScreenCenter>\n      </CSSTransition>\n      <CSSTransition in={!isStarted} timeout={300} unmountOnExit classNames=\"scaleIn\">\n        <FullScreenCenter css={scaleInTransition}>\n          <Board map={introMap} rotateTile={rotateTile} width={4} height={4} tileSize={50} />\n          <LevelSelect css={scaleInTransition} />\n        </FullScreenCenter>\n      </CSSTransition>\n    </React.Fragment>\n  );\n};\n","import {css, Global} from '@emotion/react';\nimport React from 'react';\nimport Game from './Game';\nimport GameProvider from './GameProvider';\n\nconst globalStyle = css({\n  body: {\n    margin: 0,\n    backgroundImage: `\n      linear-gradient(rgba(255,255,255,.05) 0, rgba(255,255,255,0) 3px,rgba(0,0,0,0) 30px,rgba(0,0,0,.05) 100%), \n      linear-gradient(90deg, rgba(255,255,255,.05) 0, rgba(255,255,255,0) 3px,rgba(0,0,0,0) 30px,rgba(0,0,0,.05) 100%),\n      linear-gradient(135deg, #58484d 0%,#000008 100%)\n      `,\n    backgroundSize: 'auto 4px, 4px auto, auto',\n    backgroundPosition: 'center',\n    minHeight: '100vh',\n    overflow: 'hidden',\n  },\n});\n\nexport default () => {\n  return (\n    <>\n      <Global styles={globalStyle} />\n      <GameProvider>\n        <Game />\n      </GameProvider>\n    </>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}