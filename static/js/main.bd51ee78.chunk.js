(this.webpackJsonpcolorpuzzle=this.webpackJsonpcolorpuzzle||[]).push([[0],{35:function(t,e,n){"use strict";n.r(e);var r,o,a=n(0),c=n.n(a),i=n(11),u=n.n(i),s=n(5),l=n(37),d=n(6),h=function(t){return Math.floor(Math.random()*t)},b=function(t){return t[h(t.length)]},f=function(t,e){return 0===e?t:(t%e+e)%e};!function(t){t[t.North=0]="North",t[t.East=1]="East",t[t.South=2]="South",t[t.West=3]="West"}(o||(o={}));var g,p,x=function(t,e){return{x:t%e,y:Math.floor(t/e)}},j=function(t,e){return t.x===e.x&&t.y===e.y},y=function(t,e,n,r){var o=function(t,e){return{x:t.x+e.x,y:t.y+e.y}}(t,e),a=o.x,c=o.y;return{x:f(a,n),y:f(c,r)}},m=function(t,e,n){return[e,n].map((function(e){return function(t,e){var n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(t,e),r=n.x,a=n.y;return-1===r||r>1?o.West:1===r||r<-1?o.East:-1===a||a>1?o.North:o.South}(e,t)}))},O=function(t,e){return t.map((function(t){return((t+e)%4+4)%4}))},v=(r={},Object(d.a)(r,o.North,{x:0,y:-1}),Object(d.a)(r,o.East,{x:1,y:0}),Object(d.a)(r,o.South,{x:0,y:1}),Object(d.a)(r,o.West,{x:-1,y:0}),r),w=.2761,k=(g={},Object(d.a)(g,o.North,{x:.5,y:0,cx:.5,cy:w}),Object(d.a)(g,o.East,{x:1,y:.5,cx:.7239,cy:.5}),Object(d.a)(g,o.South,{x:.5,y:1,cx:.5,cy:.7239}),Object(d.a)(g,o.West,{x:0,y:.5,cx:w,cy:.5}),g),S=["#d10","#12e","#080","#eb0"],z=function(t){var e=k[t[0]],n=k[t[1]];return"M ".concat(e.x," ").concat(e.y," C ").concat(e.cx," ").concat(e.cy,", ").concat(n.cx," ").concat(n.cy,", ").concat(n.x," ").concat(n.y)},M=function(t,e){return'<path stroke="'.concat(S[t],'" d="').concat(z(e),'"/>')},C=n(1),I={backgroundSize:"cover",strokeWidth:.5,"& path":{mixBlendMode:"screen"},"& g":{transition:"all .2s ease-in-out"}},T=function(t){var e=t.tile,n=e.x,r=e.y,o=e.strokes,a=e.rotation,c=t.onClick,i=t.onRightClick;return Object(C.a)("svg",{x:n,y:r,css:I,onClick:c,onContextMenu:i,pointerEvents:"all",children:Object(C.b)("g",{transform:"rotate(".concat(90*a," .5 .5)"),children:[o.map((function(t){var e=t.color,n=t.exits;return Object(C.a)("path",{stroke:S[e],d:z(n)},"".concat(e,"-").concat(n.join("-")))})),Object(C.a)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"none"})]})})},B=function(t,e,n,r){return{display:"block",gridTemplateColumns:"repeat(".concat(t,", 1fr)"),gridTemplateRows:"repeat(".concat(e,", 1fr)"),width:n*t,height:n*e,background:r?"rgba(0,0,0,.8)":"rgba(0,0,0,0)",padding:r?32:0,transform:r?"scale(.75)":"scale(1)",borderRadius:r?64:0,opacity:r?1:.8,transition:"all 1s ease-in-out"}},E=function(t){var e=t.map,n=t.width,r=t.height,o=t.rotateTile,a=t.tileSize,c=t.isSolved,i=void 0!==c&&c;return Object(C.a)("svg",{viewBox:"0 0 ".concat(n," ").concat(r),css:B(n,r,a,i),children:e.map((function(t){return Object(C.a)(T,{tile:t,onRightClick:function(e){e.preventDefault(),!i&&o(t,-1)},onClick:function(){!i&&o(t,1)}},"".concat(t.x,",").concat(t.y))}))})},W=n(19),R=n(2),N=n(9),P=function(t,e){return t.map((function(n,r){var o=0===r?t[t.length-1]:t[r-1],a=r===t.length-1?t[0]:t[r+1],c=m(n,o,a);return{x:n.x,y:n.y,stroke:{exits:c,color:e}}}))},A=function(t,e,n){for(var r=!1,o=[],a=Math.min(t+e,t*e-1),c=function(){var n=!0,c={x:h(t),y:h(e)};for(o=[c];!r&&n;){var i=[[-1,0],[1,0],[0,-1],[0,1]].map((function(n){var r=Object(W.a)(n,2),o=r[0],a=r[1];return y(c,{x:o,y:a},t,e)})).filter((function(t){return o.every((function(e,n){return 0===n&&o.length>a||!j(e,t)}))}));i.length>0?(c=b(i),j(o[0],c)?r=!0:o.push(c)):n=!1}};!r;)c();return P(o,n)},D=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[].concat(Object(N.a)(A(t,e,0)),Object(N.a)(A(t,e,1)),Object(N.a)(A(t,e,2)),Object(N.a)(A(t,e,3)));return Array.from({length:t*e},(function(e,o){var a=x(o,t),c=r.filter((function(t){return j(t,a)})).map((function(t){return t.stroke}));return Object(R.a)(Object(R.a)({},a),{},{strokes:c,rotation:n?Math.floor(16*Math.random()):0})}))},F=function(){var t=[].concat(Object(N.a)(P([{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:2,y:2},{x:1,y:2},{x:1,y:1}],h(4))),Object(N.a)(P([{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:1,y:3},{x:0,y:3},{x:0,y:2}],h(4))));return Array.from({length:16},(function(e,n){var r=x(n,4),o=t.filter((function(t){return j(t,r)})).map((function(t){return t.stroke}));return Object(R.a)(Object(R.a)({},r),{},{strokes:o,rotation:0})}))},L=n(4),X={width:4,height:4,introMap:F(),map:D(4,4,!0),isSolved:!1,isStarted:!1,tileSize:50,showBackground:!1},H=Object(R.a)(Object(R.a)({},X),{},{start:function(){},rotateTile:function(){},reset:function(){}}),J=c.a.createContext(H),U=function(t,e){switch(e.type){case"start":var n=e.payload,r=n.width,o=n.height,a=Math.min(document.body.offsetHeight,document.body.offsetWidth,532)-32,c=4*Math.floor(a/(4*Math.max(r,o)));return Object(R.a)(Object(R.a)({},t),{},{isSolved:!1,width:r,height:o,map:D(r,o,!0),isStarted:!0,tileSize:c});case"rotate":var i=t.map.map((function(t){return t===e.payload.tile?Object(R.a)(Object(R.a)({},t),{},{rotation:t.rotation+e.payload.turns}):t})),u=t.isStarted&&function(t,e,n){return t.every((function(r){var o=r.x,a=r.y,c=r.rotation;return r.strokes.every((function(r){var i=r.color,u=r.exits;return O(u,c).every((function(r){var c=y({x:o,y:a},v[r],e,n),u=t.find((function(t){return j(c,t)}));return u.strokes.some((function(t){return t.color===i&&O(t.exits,u.rotation+2).includes(r)}))}))}))}))}(i,t.width,t.width);return Object(R.a)(Object(R.a)({},t),{},{map:i,isSolved:u});case"reset":return Object(R.a)(Object(R.a)({},t),{},{introMap:F(),isStarted:!1,showBackground:!1});case"showBackground":return Object(R.a)(Object(R.a)({},t),{},{showBackground:!0});case"rotateDemo":var s=b(t.introMap.filter((function(t){return t.strokes.length>0}))),l=t.introMap.map((function(t){return t===s?Object(R.a)(Object(R.a)({},t),{},{rotation:t.rotation+(h(2)>0?1:-1)}):t}));return Object(R.a)(Object(R.a)({},t),{},{introMap:l});default:return t}},Y=function(t){var e=t.children,n=Object(a.useReducer)(U,X),r=Object(W.a)(n,2),o=r[0],c=r[1],i=o.width,u=o.height,s=o.introMap,l=o.map,d=o.isSolved,b=o.isStarted,f=o.tileSize,g=o.showBackground;return Object(a.useEffect)((function(){var t;return d&&(t=window.setTimeout((function(){c({type:"showBackground"})}),1e3)),function(){clearTimeout(t)}}),[d]),Object(a.useEffect)((function(){var t;return b||function e(){t=window.setTimeout((function(){c({type:"rotateDemo"}),e()}),h(600)+200)}(),function(){clearTimeout(t)}}),[b]),Object(L.jsx)(J.Provider,{value:{width:i,height:u,isSolved:d,introMap:s,map:l,start:function(t,e){return c({type:"start",payload:{width:t,height:e}})},rotateTile:function(t,e){return c({type:"rotate",payload:{tile:t,turns:e}})},reset:function(){return c({type:"reset"})},isStarted:b,tileSize:f,showBackground:g},children:e})},$=Object(s.b)({backgroundColor:"rgba(255,255,255,.5)",maxWidth:160,display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignItems:"center",padding:"8px 0",borderRadius:4}),q=Object(s.b)({border:"none",padding:"8px",fontWeight:500,fontSize:"14px",backgroundColor:"#dde",margin:"4px",color:"#667",borderRadius:4,boxShadow:"1px 1px 0 #eef inset, -1px -1px 0 #ccd inset",cursor:"pointer",width:64,"&:hover":{backgroundColor:"#eef"}}),G=Array.from({length:8},(function(t,e){return{width:e+3,height:e+3}})),K=function(t){var e=Object(a.useContext)(J).start;return Object(C.a)(c.a.Fragment,{children:Object(C.a)("div",{css:$,children:G.map((function(t){var n=t.width,r=t.height,o="".concat(n,"\xd7").concat(r);return Object(C.a)("button",{css:q,onClick:function(){return e(n,r)},children:o},o)}))})})},Q=n(24),V=Object(s.b)(p||(p=Object(Q.a)(["\n  &.scaleIn-enter {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  &.scaleIn-enter-active {\n    opacity: 1;\n    transform: scale(1);\n    transition: all 300ms;\n  }\n  &.scaleIn-exit {\n    opacity: 1;\n    transform: scale(1);\n  }\n  &.scaleIn-exit-active {\n    opacity: 0;\n    transform: scale(1.2);\n    transition: all 300ms;\n  }\n"]))),Z=function(t){return Object(s.c)({"0%":{backgroundPositionX:"50%"},"50%":{backgroundPositionX:"calc(50% - ".concat(t/2,"px)")},"100%":{backgroundPositionX:"50%"}})},_=function(t){return Object(s.c)({"0%":{backgroundPositionY:"50%"},"100%":{backgroundPositionY:"calc(50% - ".concat(t,"px)")}})},tt=function(t){var e,n=Object(a.useContext)(J),r=n.width,o=n.height,c=n.map,i=Object(a.useMemo)((function(){var t=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=t.map((function(t){var e=t.strokes,n=t.rotation,r=t.x,o=t.y,a=e.map((function(t){var e=t.color,r=t.exits;return M(e,O(r,n))}));return'<g transform="translate('.concat(r," ").concat(o,')">').concat(a.join(""),"</g>")}));return'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(r*e,'" height="').concat(r*n,'" viewBox="0 0 ').concat(e," ").concat(n,'" stroke-width=".5"><style>path { mix-blend-mode: screen;}</style>').concat(o.join(""),"</svg>")}(c,r,o,128),e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}),[r,o,c]);return Object(C.a)("div",Object(R.a)({css:(e=64*r,{position:"absolute",top:0,left:0,width:"100vw",height:"100vh",backgroundPosition:"center",clipPath:"circle(100%)",opacity:.3,animation:"".concat(Z(e)," 5s ease-in-out infinite, \n                ").concat(_(e)," 5s linear infinite"),"&.fadeIn-enter":{opacity:0},"&.fadeIn-enter-active":{opacity:.3,transition:"opacity 1.5s .5s"},"&.fadeIn-exit":{opacity:.3},"&.fadeIn-exit-active":{opacity:0,transition:"opacity .3s"}}),style:{backgroundSize:"".concat(64*r,"px"),backgroundImage:"url('".concat(i,"')")}},t))},et=Object(s.b)({position:"absolute",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),nt=function(t){return Object(C.a)("div",Object(R.a)({css:et},t))},rt=Object(s.c)({"0%":{textShadow:"0 0 0px rgba(255,255,255,.6)"},"100%":{textShadow:"0 0 9px rgba(255,255,255,.6)"}}),ot=Array.from("\ud83d\udc36\ud83d\udc31\ud83d\udc2d\ud83d\udc39\ud83d\udc30\ud83e\udd8a\ud83d\udc3b\ud83d\udc3c\ud83d\udc28\ud83d\udc2f\ud83e\udd81\ud83d\udc2e\ud83d\udc37\ud83d\udc38\ud83d\udc35"),at=function(t){var e,n=Object(a.useRef)(b(ot)),r=Object(a.useContext)(J),o=r.height,c=r.tileSize;return Object(C.a)("div",Object(R.a)(Object(R.a)({css:(e=o*c,Object(s.b)({position:"relative",display:"flex",justifyContent:"center",alignItems:"center",fontSize:100,cursor:"pointer",marginTop:e/-8,animation:"".concat(rt," 1s ease-in-out alternate infinite"),"&.growIn-enter":{fontSize:0,marginTop:0},"&.growIn-enter-active":{fontSize:100,marginTop:e/-8,transition:"font-size .5s ease-in-out, margin-top .5s ease-in-out"}}))},t),{},{children:n.current}))},ct=function(){return Object(C.a)("a",{href:"https://github.com/AndyLnd/colorpuzzle",css:{marginTop:16},children:Object(C.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 43.4 42.4",children:Object(C.a)("path",{fill:"#fff",fillRule:"evenodd",d:"M21.7 0A21.7 21.7 0 0015 42.3c1 .2 1.4-.4 1.4-1v-3.7c-6 1.3-7.3-3-7.3-3-1-2.4-2.4-3.1-2.4-3.1-2-1.3.1-1.3.1-1.3 2.2.1 3.4 2.2 3.4 2.2 1.9 3.3 5 2.4 6.3 1.8.2-1.4.7-2.3 1.4-2.9-4.9-.5-10-2.4-10-10.7 0-2.4 1-4.3 2.3-5.8-.2-.6-1-2.8.2-5.8 0 0 1.8-.6 6 2.2a20.7 20.7 0 0110.9 0c4.1-2.8 6-2.2 6-2.2 1.1 3 .4 5.2.1 5.8a8.4 8.4 0 012.3 5.8c0 8.3-5.1 10.2-10 10.7.8.7 1.5 2 1.5 4v6c0 .6.4 1.2 1.5 1A21.7 21.7 0 0021.7 0"})})})},it=function(){var t=Object(a.useContext)(J),e=t.isSolved,n=t.isStarted,r=t.introMap,o=t.map,i=t.rotateTile,u=t.width,s=t.height,d=t.reset,h=t.tileSize,b=t.showBackground;return Object(C.b)(c.a.Fragment,{children:[Object(C.a)(l.a,{in:b,timeout:{enter:2e3,exit:300},unmountOnExit:!0,classNames:"fadeIn",children:Object(C.a)(tt,{})}),Object(C.a)(l.a,{in:n,timeout:300,unmountOnExit:!0,mountOnEnter:!0,classNames:"scaleIn",children:Object(C.b)(nt,{css:V,children:[Object(C.a)(E,{map:o,rotateTile:i,width:u,height:s,tileSize:h,isSolved:e}),Object(C.a)(l.a,{in:e,timeout:500,unmountOnExit:!0,classNames:"growIn",children:Object(C.a)(at,{onClick:d,children:"reset"})})]})}),Object(C.a)(l.a,{in:!n,timeout:300,unmountOnExit:!0,classNames:"scaleIn",children:Object(C.b)(nt,{css:V,children:[Object(C.a)(E,{map:r,rotateTile:i,width:4,height:4,tileSize:50}),Object(C.a)(K,{css:V}),Object(C.a)(ct,{})]})})]})},ut=Object(s.b)({body:{margin:0,backgroundImage:"\n      linear-gradient(rgba(255,255,255,.05) 0, rgba(255,255,255,0) 3px,rgba(0,0,0,0) 30px,rgba(0,0,0,.05) 100%), \n      linear-gradient(90deg, rgba(255,255,255,.05) 0, rgba(255,255,255,0) 3px,rgba(0,0,0,0) 30px,rgba(0,0,0,.05) 100%),\n      linear-gradient(135deg, #58484d 0%,#000008 100%)\n      ",backgroundSize:"auto 4px, 4px auto, auto",backgroundPosition:"center",minHeight:"100vh",overflow:"hidden"}}),st=function(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(s.a,{styles:ut}),Object(L.jsx)(Y,{children:Object(L.jsx)(it,{})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(L.jsx)(st,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.bd51ee78.chunk.js.map